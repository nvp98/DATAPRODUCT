@using Data_Product.Models
@using System.Security.Claims;
@using Data_Product.Repositorys;
@using Microsoft.EntityFrameworkCore;
@inject Data_Product.Repositorys.DataContext _context
@model List<Tbl_BM_16_GangLong>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="~/Content/assets/Chonse/chosen.jquery.js"></script>
<link href="~/Content/assets/Chonse/chosen.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<style>
	table th {
		text-align: center;
	}

	#dataTable input {
		border-radius: 0px !important;
	}
</style>
@if (TempData["msgSuccess"] != null)
{
	@Html.Raw(TempData["msgSuccess"])
}
@if (TempData["msgError"] != null)
{
	@Html.Raw(TempData["msgError"])
}
@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";

	Pager pager = new Pager();
	int pageNo = 0;
	if (ViewBag.Pager != null)
	{
		pager = ViewBag.Pager;
		pageNo = pager.CurrentPage;
	}
}
@using (Html.BeginForm("TaoPhieu", "BM16_GangThoi", FormMethod.Post, new { enctype = "multipart/form-data", id = "TaoPhieu" }))
{
	<div class="app-main__outer">
		<div class="app-main__inner" style="display:block;padding-bottom: 0px;">
			<div class="tab-content">
				<div class="row">
					@* <div class="card">
						<div class="row" style="width:100%">
							<div style="display: flex; border-bottom: 0.8px solid #E8E8E8; position: absolute; background-color: #F9F9F9; width: 100%;height: 80px;margin-top: -33px; ">
								<div style="flex: 2; text-align: left; padding: 2% 2% 2% 0%;">
									<span class="text-muted small pt-2 ps-1">
										<b style="color:#06428b">
											BM.16/QT.05.09
										</b>
									</span>
								</div>
							</div>

						</div>
						<div class="row w-100 pt-4" style="padding-top:3.5rem!important">
							<div class="col-lg-12">
								<div class="row g-3 align-items-end">
									<!-- Ngày làm việc -->
									<div class="col">
										<div class="d-flex align-items-center bg-light rounded shadow-sm px-3 py-2">
											<label for="ID_Day" class="form-label mb-0 text-dark me-2" style="font-size: 14px; min-width: 90px;">Ngày:</label>
											<input type="date" id="ID_Day" name="ID_Day"
												   class="form-control form-control-sm"
												   min="@ViewBag.MinDate"
												   max="@ViewBag.MaxDate"
												   value="@ViewBag.DefaultDate"
												   onkeydown="return false;" />
										</div>
									</div>

									<!-- Lò cao -->
									<div class="col">
										<div class="d-flex align-items-center bg-light rounded shadow-sm px-3 py-2">
											<label for="IDLoCao" class="form-label mb-0 text-dark me-2" style="font-size: 14px; min-width: 90px;">Lò cao:</label>
											<select class="form-select form-select-sm w-auto" name="LoCao" id="IDLoCao">
												<option value="null">-- Lò cao --</option>
												<option value="1">Lò cao 1</option>
												<option value="2">Lò cao 2</option>
												<option value="3">Lò cao 3</option>
												<option value="4">Lò cao 4</option>
											</select>
										</div>
									</div>

									<!-- Ca làm việc -->
									<div class="col">
										<div class="d-flex align-items-center bg-light rounded shadow-sm px-3 py-2">
											<label for="IDCa" class="form-label mb-0 text-dark me-2" style="font-size: 14px; min-width: 90px;">Ca:</label>
											<select class="form-select form-select-sm w-auto SelectCA" name="IDCa" id="IDCa">
												<option value="null">-- Ca --</option>
												<option value="1">1</option>
												<option value="2">2</option>
											</select>
										</div>
									</div>

									<!-- Kíp làm việc -->
									<div class="col">
										<div class="d-flex align-items-center bg-light rounded shadow-sm px-3 py-2">
											<label for="CaKip" class="form-label mb-0 text-dark me-2" style="font-size: 14px; min-width: 90px;">Kíp:</label>
											<select class="form-select form-select-sm w-auto" name="CaKip" id="CaKip" disabled></select>
										</div>
									</div>

									<!-- Nút tìm kiếm -->
									<div class="col d-flex align-items-center justify-content-end">
										<button type="submit" class="btn btn-success px-4 py-2 fs-6" name="btnSave" id="btnSave" value="1">
											<i class="bi bi-search"></i>
											<span class="ps-2">Tìm kiếm</span>
										</button>
									</div>
								</div>
							</div>
						</div>

					</div> *@
					<div class="card-body" style="padding-top: 0%; overflow-x: auto; font-size: 14px;">
						<div class="row w-100 justify-content-end mb-3">
							<div class="col-auto">
								<button type="button" class="btn btn-success me-2">
									<i class="bi bi-arrow-right-circle"></i> Chuyển
								</button>
								<button type="button" class="btn btn-danger">
									<i class="bi bi-arrow-counterclockwise"></i> Thu hồi
								</button>
							</div>
						</div>
						<div class="table-responsive" style="height: auto;">
							<table class="table table-bordered table-hover align-middle text-center" id="dataTable">
								<thead class="table-light">
									<tr>
										<th rowspan="2">Xóa</th>
										<th rowspan="2">Copy thùng</th>
										<th rowspan="2">Mã thùng</th>
										<th rowspan="2">Số mẻ</th>
										<th rowspan="2">Thùng số</th>
										<th rowspan="2">Giờ</th>
										<th rowspan="2">Phân loại</th>
										<th rowspan="2">KL xe goong</th>
										<th rowspan="2">KL thùng</th>
										<th rowspan="2">KL thùng & gang lỏng</th>
										<th rowspan="2">KL gang lỏng cân ray</th>
										<th colspan="4">Vận chuyển đến</th>
										<th rowspan="2">Giờ NM</th>
										<th rowspan="2">Ghi chú</th>
										<th rowspan="2">
											<div style="font-size: 12px;">Chọn thùng</div>
											<input type="checkbox" class="form-check-input" style="width: 20px; height: 20px;" title="Chọn tất cả">
										</th>
										<th rowspan="2">Tình trạng</th>
									</tr>
									<tr>
										<th>NM.HRC1</th>
										<th>NM.HRC2</th>
										<th>Đúc1</th>
										<th>Đúc2</th>
									</tr>
								</thead>
								<tbody>
									@if (ViewBag.DanhSachThung != null)
									{
										foreach (var item in ViewBag.DanhSachThung)
										{
											<tr>
												<td class='text-center delItem'>
													<a class="btn btn-danger btn-sm" title="Xóa">
														<i class="bi bi-trash"></i>
													</a>
												</td>
												<td class='text-center copyItem'>
													<a class="btn btn-secondary btn-sm copyRowBtn" title="Copy dòng">
														<i class="bi bi-copy"></i>
													</a>
												</td>
												<td>@item.MaThung</td>
												<td>@item.SoMe</td>
												<td>@item.ThuTuThung</td>
												<td>@item.GioNhaMay</td>
												<td>@item.PhanLoai</td>
												<td>@item.KL_XeGoong</td>
												<td>@item.KL_Thung</td>
												<td>@item.KL_Thung_GangLong</td>
												<td>@item.KL_GangLong_CanRay</td>
												<td>@(item.DenHRC1 ? "✓" : "")</td>
												<td>@(item.DenHRC2 ? "✓" : "")</td>
												<td>@(item.DenDuc1 ? "✓" : "")</td>
												<td>@(item.DenDuc2 ? "✓" : "")</td>
												<td>@item.GioNM</td>
												<td>@item.GhiChu</td>
												<td><input type="checkbox" /></td>
												<td>
													@if (item.DaChuyen)
													{
														<button class="btn btn-success btn-sm">Đã chuyển</button>
													}
													else
													{
														<button class="btn btn-danger btn-sm">Chưa chuyển</button>
													}
												</td>
											</tr>
										}
									}
								</tbody>

							</table>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
}
